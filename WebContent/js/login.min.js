function checkCard(){var e=document.getElementById("card_no").value;return""===e?(sp.innerHTML="请输入身份证号，身份证号不能为空",!1):isCardNo(e)===!1?(sp.innerHTML="您输入的身份证号码不正确，请重新输入",!1):checkProvince(e)===!1?(sp.innerHTML="您输入的身份证号码不正确,请重新输入",!1):checkBirthday(e)===!1?(sp.innerHTML="您输入的身份证号码生日不正确,请重新输入",!1):checkParity(e)===!1?(sp.innerHTML="您的身份证校验位不正确,请重新输入",!1):!0}var techer=document.getElementById("techer"),student=document.getElementById("student"),login=document.getElementsByName("login")[0],fo=document.getElementById("fo"),card=fo.getElementsByTagName("input")[0].value,sp=document.getElementsByTagName("span")[0],vcity={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};login.onclick=function(){return techer.checked?fo.action="search.html":student.checked&&(fo.action="student.html"),checkCard()},isCardNo=function(e){var r=/(^\d{15}$)|(^\d{17}(\d|X)$)/;return r.test(e)===!1?!1:!0},checkProvince=function(e){var r=e.substr(0,2);return void 0==vcity[r]?!1:!0},checkBirthday=function(e){var r=e.length;if("15"==r){var t=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/,n=e.match(t),a=n[2],u=n[3],i=n[4],c=new Date("19"+a+"/"+u+"/"+i);return verifyBirthday("19"+a,u,i,c)}if("18"==r){var f=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/,n=e.match(f),a=n[2],u=n[3],i=n[4],c=new Date(a+"/"+u+"/"+i);return verifyBirthday(a,u,i,c)}return!1},verifyBirthday=function(e,r,t,n){var a=new Date,u=a.getFullYear();if(n.getFullYear()==e&&n.getMonth()+1==r&&n.getDate()==t){var i=u-e;return i>=3&&100>=i?!0:!1}return!1},checkParity=function(e){e=changeFivteenToEighteen(e);var r=e.length;if("18"==r){var u,i,t=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),n=new Array("1","0","X","9","8","7","6","5","4","3","2"),a=0;for(u=0;17>u;u++)a+=e.substr(u,1)*t[u];return i=n[a%11],i==e.substr(17,1)?!0:!1}return!1},changeFivteenToEighteen=function(e){if("15"==e.length){var a,r=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),t=new Array("1","0","X","9","8","7","6","5","4","3","2"),n=0;for(e=e.substr(0,6)+"19"+e.substr(6,e.length-6),a=0;17>a;a++)n+=e.substr(a,1)*r[a];return e+=t[n%11]}return e};